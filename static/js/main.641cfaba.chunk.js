(this["webpackJsonpresturant-front"]=this["webpackJsonpresturant-front"]||[]).push([[0],{165:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(32),o=t.n(l),s=(t(85),t(15)),i=t(16),c=t(18),m=t(17),u=t(75),h=t(35),d=t(6),E=(t(36),t(26)),g=t(22),f=t.n(g),p=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={email:"",password:"",showEmailError:!1,showLoginError:!1,isLoading:!1},e.handleChangeEmail=function(a){var t=a.target.value;e.setState((function(){return{email:t}}))},e.handleChangePassword=function(a){var t=a.target.value;e.setState((function(){return{password:t}}))},e.handleSubmit=function(a){a.preventDefault();var t=e.state.email;if(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)){e.setState((function(){return{showEmailError:!1}}));var n=new FormData(a.target),r={};n.forEach((function(e,a){return r[a]=e}));Object(E.a)(e);var l=e.props,o=l.startLoading,s=l.finishLoading,i=l.saveUserDetails,c=(l.localAPI,l.remoteAPI);o(),e.setState({isLoading:!0}),f.a.post("".concat(c,"/auth"),r).then((function(a){console.log(a.status),i(a.data.userId,a.data.fullName,a.data.token),s(),e.setState({showEmailError:!1,showLoginError:!1,isLoading:!1})})).catch((function(a){console.log("error :"+a),e.setState((function(){return{showEmailError:!1,showLoginError:!0,isLoading:!1}})),s()}))}else e.setState((function(){return{showEmailError:!0,showLoginError:!1,email:""}}))},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this.state,a=e.email,t=e.password,n=e.showEmailError,l=e.showLoginError,o=e.isLoading;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("br",null),r.a.createElement("h1",null,"Login"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",className:"form-control",name:"email",placeholder:"someone@domain.com",value:a,onChange:this.handleChangeEmail})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"password",value:t,onChange:this.handleChangePassword})),r.a.createElement("button",{className:"btn btn-primary",disabled:""===a||""===t||!0===o},"Login"))),r.a.createElement("br",null),!1===n?"":r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please enter a valid email"),!1===l?"":r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"email/password is not correct")))}}]),t}(r.a.Component),v=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={fullName:"",email:"",mobile:"",password:"",showEmailError:!1,showEmailAlreadyExists:!1,showRegistrationFail:!1,showRegistrationSuccessful:!1,redirctToLogin:!1,isLoading:!1},e.handleChangeFullName=function(a){var t=a.target.value;e.setState((function(){return{fullName:t}}))},e.handleChangeEmail=function(a){var t=a.target.value;e.setState((function(){return{email:t}}))},e.handleChangeMobile=function(a){var t=a.target.value;/^\d+$/.test(t)&&e.setState((function(){return{mobile:t}}))},e.handleChangePassword=function(a){var t=a.target.value;e.setState((function(){return{password:t}}))},e.handleSubmit=function(a){a.preventDefault();var t=e.state.email;if(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)){e.setState((function(){return{showEmailError:!1}}));var n=new FormData(a.target),r={};n.forEach((function(e,a){return r[a]=e}));var l=Object(E.a)(e),o=e.props,s=o.startLoading,i=o.finishLoading,c=(o.localAPI,o.remoteAPI);s(),e.setState({isLoading:!0}),f.a.post("".concat(c,"/auth/register"),r).then((function(a){console.log(a.status),e.setState({showRegistrationFail:!1,showEmailAlreadyExists:!1,showEmailError:!1,showRegistrationSuccessful:!0,isLoading:!1}),l.props.finishLoading(),setTimeout((function(){l.setState((function(){return{redirctToLogin:!0}}))}),1e3)})).catch((function(a){console.log("error :"+a),a.toString().includes("406")?e.setState({showRegistrationFail:!1,showEmailAlreadyExists:!0,showEmailError:!1,showRegistrationSuccessful:!1,isLoading:!1}):e.setState({showRegistrationFail:!0,showEmailAlreadyExists:!1,showEmailError:!1,showRegistrationSuccessful:!1,isLoading:!1}),i()}))}else e.setState((function(){return{showEmailError:!0,showRegistrationSuccessful:!1,showEmailAlreadyExists:!1,showRegistrationFail:!1,email:""}}))},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this.state,a=e.fullName,t=e.email,n=e.mobile,l=e.password,o=e.showEmailError,s=e.showEmailAlreadyExists,i=e.showRegistrationFail,c=e.showRegistrationSuccessful,m=e.redirctToLogin,u=e.isLoading;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("br",null),r.a.createElement("h1",null,"Register"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Fullname"),r.a.createElement("input",{type:"text",className:"form-control",name:"fullName",placeholder:"Rami",value:a,onChange:this.handleChangeFullName})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",className:"form-control",name:"email",placeholder:"someone@domain.com",value:t,onChange:this.handleChangeEmail})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Mobile"),r.a.createElement("input",{type:"text",className:"form-control",name:"mobile",placeholder:"0599565705",value:n,onChange:this.handleChangeMobile})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",value:l,onChange:this.handleChangePassword})),r.a.createElement("button",{className:"btn btn-primary",disabled:""===a||""===t||""===n||""===l||!0===u},"Register"))),r.a.createElement("br",null),!1===o?"":r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please enter a valid email"),!1===i?"":r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"User registration failed, please contact admin"),!1===s?"":r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Email already exists"),!1===c?"":r.a.createElement("div",{className:"alert alert-success",role:"alert"},"User registration is successful"),0==m?"":this.props.history.push("/")))}}]),t}(r.a.Component),w=Object(d.e)(v),b=t(77),N=t.n(b),S=(t(107),function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card text-center",style:{color:"black",width:"400px"}},r.a.createElement("div",{className:"card-header"},"Date: ",new Date(this.props.date).toLocaleDateString("en-US")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Meal: ",this.props.meal),r.a.createElement("p",{className:"card-text"},"Notes: ",this.props.notes)))}}]),t}(r.a.Component)),L=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={meal:"",notes:"",reserveDate:"",showDateError:!1,notesLength:0,showReservationSuccess:!1,showReservationFail:!1,isLoading:!1,reservations:[]},e.fetchUserReservations=function(){var e=this,a=this.props,t=a.userId,n=a.token,r=(a.localAPI,a.remoteAPI);f.a.get("".concat(r,"/reserve/")+t,{headers:{Authorization:"Bearer "+n,Accept:"application/json","Content-Type":"application/json"}}).then((function(a){console.log(a.data),e.setState({reservations:a.data})}))},e.handleChangeMeal=function(a){var t=a.target.value;e.setState((function(){return{meal:t}}))},e.handleChangeNotes=function(a){var t=a.target.value;e.setState((function(){return{notes:t.substring(0,299),notesLength:t.length}}))},e.handleDateChange=function(a){var t=new Date;t.setHours(0,0,0,0),a<t?e.setState({reserveDate:"",showDateError:!0}):e.setState({reserveDate:a,showDateError:!1})},e.handleSubmit=function(a){a.preventDefault();var t=new FormData(a.target),n={};t.forEach((function(e,a){return n[a]=e})),n.userId=e.props.userId,console.log(n);var r=e.props,l=r.startLoading,o=r.finishLoading,s=r.token,i=(r.localAPI,r.remoteAPI);l(),e.setState({isLoading:!0}),f.a.post("".concat(i,"/reserve"),n,{headers:{Authorization:"Bearer "+s,Accept:"application/json","Content-Type":"application/json"}}).then((function(a){console.log(a.status),o(),e.setState({showReservationSuccess:!0,showReservationFail:!1,isLoading:!1}),e.fetchUserReservations()})).catch((function(a){console.log("error :"+a),o(),e.setState({showReservationFail:!0,showReservationSuccess:!1,isLoading:!1})}))},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchUserReservations()}},{key:"render",value:function(){var e=this.state,a=e.meal,t=e.notes,n=e.reserveDate,l=e.showDateError,o=e.notesLength,s=e.showReservationSuccess,i=e.showReservationFail,c=e.isLoading,m=e.reservations;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("br",null),r.a.createElement("h1",null,"Reserve"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Date"),r.a.createElement(N.a,{name:"date",className:"form-control",selected:n,onChange:this.handleDateChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Meal"),r.a.createElement("select",{name:"meal",className:"form-control",value:a,onChange:this.handleChangeMeal},r.a.createElement("option",{value:"breakfast"},"Breakfast"),r.a.createElement("option",{value:"lunch"},"Lunch"),r.a.createElement("option",{value:"dinner"},"Dinner"),r.a.createElement("option",{value:"drink"},"Drink"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Notes"),r.a.createElement("textarea",{type:"text",className:"form-control",name:"notes",placeholder:"Enter your order details",value:t,onChange:this.handleChangeNotes})),r.a.createElement("small",null,300-o," Remaining"),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-primary",disabled:""===t||""===n||!0===c},"Reserve"))),r.a.createElement("br",null),!1===l?"":r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Please enter a date in the future"),!1===i?"":r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"An error has occured"),!1===s?"":r.a.createElement("div",{className:"alert alert-success",role:"alert"},"Reservation request is complete"),r.a.createElement("div",null,r.a.createElement("h3",null,"History"),r.a.createElement("ul",{className:"reserve-history"},m.length<=0?"Noting yet":m.map((function(e){return r.a.createElement("li",{key:e.id,style:{marginBottom:"30px"}},r.a.createElement(S,{date:e.date,meal:e.meal,notes:e.notes}))}))))))}}]),t}(r.a.Component),A=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={userId:"",fullName:"",token:"",localAPI:"https://localhost:44385/api",remoteAPI:"https://resturantapi20200713042036.azurewebsites.net/api"},e.logout=function(){e.setState((function(){return{userId:"",fullName:""}}))},e.saveUserDetails=function(a,t,n){e.setState((function(){return{userId:a,fullName:t,token:n}})),console.log("token is: "+e.state.token)},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(u.a,{height:3,color:"#1a1aff",onRef:function(a){return e.LoadingBar=a}}),r.a.createElement(h.a,{basename:"/"},""===this.state.userId?r.a.createElement(n.Fragment,null,r.a.createElement("ul",{className:"Nav-list"},r.a.createElement("li",null,r.a.createElement(h.b,{to:"/"},"Login")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/register"},"Register"))),r.a.createElement("h3",null,"Welcome to Resturant Reservation System V0.1"),r.a.createElement(d.a,{path:"/register",exact:!0,render:function(a){return r.a.createElement(w,{localAPI:e.state.localAPI,remoteAPI:e.state.remoteAPI,startLoading:function(){return e.LoadingBar.continuousStart()},finishLoading:function(){return e.LoadingBar.complete()}})}}),r.a.createElement(d.a,{path:"/",exact:!0,render:function(a){return r.a.createElement(p,{localAPI:e.state.localAPI,remoteAPI:e.state.remoteAPI,saveUserDetails:e.saveUserDetails,startLoading:function(){return e.LoadingBar.continuousStart()},finishLoading:function(){return e.LoadingBar.complete()}})}})):r.a.createElement(n.Fragment,null,r.a.createElement("ul",{className:"Nav-list"},r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Welcome ",this.state.fullName)),r.a.createElement("li",null,r.a.createElement("a",{href:"#",onClick:this.logout},"Logout"))),r.a.createElement(L,{token:this.state.token,userId:this.state.userId,localAPI:this.state.localAPI,remoteAPI:this.state.remoteAPI,startLoading:function(){return e.LoadingBar.continuousStart()},finishLoading:function(){return e.LoadingBar.complete()}})))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(164);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,a,t){},80:function(e,a,t){e.exports=t(165)},85:function(e,a,t){}},[[80,1,2]]]);
//# sourceMappingURL=main.641cfaba.chunk.js.map